pipeline
{
   agent any
   stages
   {
     stage("scm checkout")
	 {
	 steps
		{
			git 'https://github.com/vivalka/maven-project'
		}
	 }
	 
	 stage("compile source code")
	 {
	 steps
		{
			withMaven(jdk: 'jdkLocal-8', maven: 'localMaven') 
			{
				sh 'mvn compile'	
			}
		}
	 }
	 
	 
	 
	 stage("test")
	 {
	 steps
		{
			withMaven(jdk: 'jdkLocal-8', maven: 'localMaven') 
			{
				sh 'mvn test'	
					
			}
		}
	 }
	 
	 stage("build my job")
	 {
	 steps
		{
			withMaven(jdk: 'jdkLocal-8', maven: 'localMaven') 
			{
				sh 'mvn package'	
					
			}
		}
	 }
	 
	
	 }
	 
	 
   }
   
}
